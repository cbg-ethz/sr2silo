#### Configuration for sr2silo workflow - TEMPLATE

### Virus Metadata
VIRUS_NAME: "template"                      # [a-z0-9-]+, used in filenames
VIRUS_DISPLAY_NAME: "Template Virus"        # Human-readable name

### Sample Selection
LOCATIONS:
  - 5   # Lugano (TI)
  - 15  # Basel (BS)
  - 17  # Chur (GR)
  - 10  # Zürich (ZH)
  - 16  # Geneva (GE)
  - 25  # Laupen (BE)

# Date range for sample selection
# Supports both explicit dates (YYYY-MM-DD) and relative dates:
# - "TODAY" → current date
# - "1_WEEK_AGO" or "1_WEEKS_AGO" → 1 week back
# - "2_WEEKS_AGO" → 2 weeks back
# - "1_MONTH_AGO" or "1_MONTHS_AGO" → 1 month back
# - "3_MONTHS_AGO" → 3 months back
# - "30_DAYS_AGO" → 30 days back
# Examples:
#   START_DATE: "2_MONTHS_AGO"  # Process last 2 months
#   END_DATE: "TODAY"           # Up to current date
START_DATE: "3_MONTHS_AGO"
END_DATE: "TODAY"

### Input Files
# Path to V-Pipe output directory containing samples
# Structure: {BASE_SAMPLE_DIR}/{sample}/{batch}/alignments/REF_aln_trim.bam
BASE_SAMPLE_DIR: "/cluster/project/pangolin/processes/template/vpipe_output"

# Timeline file for sample metadata and filtering
# Required columns: sample, batch, reads, proto, location_code, date, location
TIMELINE_FILE: "/cluster/project/pangolin/processes/template/working/timeline.tsv"

### Output Files
RESULTS_DIR: "../../silo-inputs/template"
LOG_DIR: "../../logs/template"

### Loculus (to submit results to)
## URLs for Loculus services
KEYCLOAK_TOKEN_URL: "https://auth.db.wasap.genspectrum.org/realms/loculus/protocol/openid-connect/token"
BACKEND_URL: "https://api.db.wasap.genspectrum.org/backend"
GROUP_ID: 1                                 # Unique ID per virus
ORGANISM: "template"                        # Must match SILO database

## Auto-release configuration
# If true, automatically release/approve sequences after submission
# This waits RELEASE_DELAY seconds to allow backend processing, then releases
AUTO_RELEASE: false
RELEASE_DELAY: 180                          # Seconds to wait before releasing (default: 3 minutes)

## Authentication credentials
# NOTE: USERNAME and PASSWORD are loaded from encrypted secrets/credentials.enc
# Do NOT include plaintext credentials in this file!
# Create encrypted credentials with:
#   cat > credentials.txt << EOF
#   USERNAME=vpipe
#   PASSWORD=<password>
#   EOF
#   gpg --symmetric --cipher-algo AES256 credentials.txt
#   rm credentials.txt

### LAPIS – hosting the SILO database (to query reference from)
# Optional: specify LAPIS URL for custom reference genomes
# If not provided, uses default reference (NCBI Reference Sequence)
# LAPIS_URL: "https://lapis.wasap.genspectrum.org/"

### Subsampling Configuration
## Subsampling 1) by fraction 2) by max reads or 3) by fraction, but max max_reads
ENABLE_SUBSAMPLING: true
# SUBSAMPLE_FRACTION: 0.5
SUBSAMPLE_MAX_READS: 4500000                # keep at most 4.5 Mio Reads
